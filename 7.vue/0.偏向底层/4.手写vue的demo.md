### 1.模板字符串

> 正则过滤，拿到花括号里的内容
>
> 字符串截取，去掉花括号，拿到属性名
>
> 在data中查找对应的属性
>
> return出去改属性值，会自动替换str中的对应部分，并储存在res中
>
> 在dom中找到对应节点，替换为res的内容

```js
let data = {
    num: 2,
    msg: "wuh",
};
//不以{{开头 }}结尾 中间内容至少一个，内容任意，且不能为}
let reg = /\{\{[^}]*\}\}/g;
let str = "<div>自由民{{num}},主富{{msg}}强</div>";
//replace 第二个参数若为函数，可以返回过滤后的值，且这个值会替换对应的值
let res = str.replace(reg, function (s) {
    //正则过滤后的结果
    console.log(s);
    let foo = s.slice(2, s.length - 2);
    //去掉正则前后的双花括号
    console.log(foo);
    console.log(data[foo]);
    return data[foo];
});
console.log(res);
```



### 2.双向数据绑定

vue2中使用的是defineproperty，vue3中使用的是proxy，此为vue2

```js

let data = {
    foo: "123",
    bar: "abc",
};
function Observer(obj) {
    //对象 => 数组
    const keys = Object.keys(obj);
    //遍历
    keys.forEach((k) => {
        //修改Observer实例的的属性读写操作
        Object.defineProperty(this, k, {
            get() {
                //把当前obj对象的键值赋给实例的同键名k，
                return obj[k];
            },
            set(value) {
                //当修改了属性后，这里实际上写的是一个调用，这个调用会去页面中更新模板，也就实现了响应式

                console.log(`${k}被修改了`);
                obj[k] = value;
            },
        });
    });
}
```

